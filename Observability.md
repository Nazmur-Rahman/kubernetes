**Observability** = understanding system behavior using metrics, logs, traces.

**Prometheus**
Prometheus is a time-series metrics database and monitoring system.
* ***Collects Metrics â†’*** scrapes data from apps, services, nodes (using exporters like node_exporter).
* ***Stores Metrics â†’*** in a time-series database (optimized for monitoring).
* ***Querying â†’*** uses PromQL to analyze metrics.
* ***lerting â†’*** integrates with Alertmanager for sending alerts (email, Slack, PagerDuty).

ðŸ‘‰ Example: Prometheus scrapes ***/metrics** endpoint of an app and records:

**Grafana**
Grafana is a visualization and analytics tool.
* ***Connects to Prometheus*** (and other data sources like Loki, Tempo, Elasticsearch).
* **Dashboards â†’*** turns raw metrics into graphs, heatmaps, and panels.
* ***Alerting â†’*** can trigger alerts based on thresholds.
* ***Correlation â†’*** lets you combine metrics, logs, and traces in a single view.

***ðŸ‘‰ Together:** ***Prometheus = collect & store, Grafana = visualize & analyze*** â†’ complete observability.
--------------------------------------------------------------------------------------------------------------------
## Deploy Prometheus & Grafana on Kubernetes with Helm

Create the Namespace
```
kubectl create ns monitoring
```
#### Install Prometheus (prometheus-community chart)

Add the repo and update chart indices:
```
helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
```
Update repo
```
helm repo update
```
Install Prometheus into the monitoring namespace:
```
helm install prometheus prometheus-community/prometheus --namespace monitoring
```
Verify Pods:
```
kubectl get pods -n monitoring
```
*Wait until all Prometheus pods are in Running/Ready state*

Expose Prometheus as *NodePort* (creates a new Service):
```
kubectl expose service prometheus-server --namespace monitoring --type=NodePort --target-port=9090 --name=prometheus-server-0
```
`Alternative:` *You can also expose with **--type=LoadBalancer** if your Kubernetes cluster supports external LoadBalancers (e.g., AKS, EKS, GKE).*

Check Services and note the NodePort *or* external IP:
```
kubectl get svc -n monitoring
```
Access Prometheus in your browser using the *nodeâ€™s IP* & *NodePort* or the *LoadBalancer external IP*. Example:

`http://192.168.105.2:32535`

#### Install Grafana
Add the repo and install Grafana:
```
helm repo add grafana https://grafana.github.io/helm-charts
```
Install grafana into the monitoring namespace:
```
helm install grafana grafana/grafana --namespace monitoring
```
Verify Pods:
```
kubectl get pods -n monitoring
```

Get the autogenerated admin password:
```
kubectl get secret --namespace monitoring grafana -o jsonpath="{.data.admin-password}" | base64 --decode ; echo
```

Expose Grafana as *NodePort* (creates a new Service):
```
kubectl expose service grafana --namespace monitoring --type=NodePort --target-port=3000 --name=grafana-0
```
`Alternative:` *You can also expose Grafana with **--type=LoadBalancer** for a public/external endpoint.*

Check Services and note the NodePort or external IP:
```
kubectl get svc -n monitoring
```
Access Grafana in your browser. Example:
`http://192.168.105.2:31173` 
